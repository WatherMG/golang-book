# 5.7 Вариативные функции

Вариативные функции (функция с переменным количеством аргументов) - это функция, которая может быть вызвана с разным
количеством аргументов. Наиболее знакомым примером является функция `fmt.Printf` и ее разновидности. Функция `Printf`
требует одного фиксированного аргумента в начале, после которого может следовать любое количество других аргументов.

Чтобы объявить вариативную функцию, перед типом последнего параметра указывается троеточие `...`, которое говорит о том,
что функция может быть вызвана с любым количеством аргументов данного типа (см. sum.go)

Неявно вызывающая функция выделяет память для массива, копирует в него аргументы и передает в функцию срез,
представляющий весь массив. Последни вызов, показанный в примере `fmt.Println(sum(1, 2, 3, 4))`, таким образом, ведет
себя так же, как приведенный ниже, в котором показано, как вызывать вариативные функции, когда аргументы уже находятся
в срезе: следует добавить троеточие после последнего аргумента:

``` go
values := []int{1, 2, 3, 4}
fmt.Println(sum(values...)) // 10
```

Хотя параметр `...int` ведет себя в теле функции, как срез, тип вариативной функции отличается от типа функции с
параметром:

``` go
func f(...int) {}
func g([]int) {}

fmt.Printf("%T\n", f) // func(...int)
fmt.Printf("%T\n", g) // func([]int)
```

Вариативные функции часто используются для форматирования строк. Показанная далее функция `errorf` создает
форматированное сообщение об ошибке с номером строки в его начале. Суффикс `f` является широко распространенным
соглашением об именовании вариативных функций, которые принимают строку формата в стиле `Printf`.

``` go
func errorf(linenum int, format string, args ...interface{}) {
    fmt.Fprintf(os.Stderr, "Стр. %d", linenum)
    fmt.Fprintf(os.Stderr, format, args...)
    fmt.Fprintf(os.Stderr)
}

linenum, name := 12, "count"
errorf(linenum, "не определен %s", name) // "Стр. 12: не определен count"
```

Тип `interface{}` означает, что данная функция может принимать любые значения в качестве последних аргументов, как будет
показано в главе 7 ("Интерфейсы").

## Выводы:

* Вариативные функции - это функции, которые могут быть вызваны с разным количеством аргументов; это удобно, например,
  для функций форматирования строк, таких как `fmt.Printf` в Go.
  Пример использования вариативной функции:
  ``` go
  func sum(nums ...int) int {
        total := 0
        for _, num := range nums {
            total += num
        }
        return total
    }
    fmt.Println(sum(1, 2, 3, 4)) // 10
  ```
* Чтобы объявить вариативную функцию, перед типом последнего параметра указывается троеточие `...`, которое говорит о
  том, что функция может быть вызвана с любым количеством аргументов данного типа. Это позволяет создавать более гибкие
  и универсальные функции;
* Вызывающая функция, `неявно` выделяет память для массива, копирует в него аргументы и передает в функцию срез,
  который представляет весь массив.
* Чтобы вызвать вариативную функцию с аргументами, уже находящимися в срезе, следует добавить троеточие после последнего
  аргумента. Это удобно для обработки наборов данных, которые уже представлены в виде срезов:
  ``` go
  values := []int{1, 2, 3, 4}
  fmt.Println(sum(values...)) // 10
  ```
* Внутри функции параметр `...int` ведет себя как `срез (slice)`. Однако тип вариативной функции отличается от типа
  функции с параметром типа среза.
  Пример:
  ``` go
  func f(...int) {}
  func g([]int) {}
  fmt.Printf("%T\n", f) // func(...int)
  fmt.Printf("%T\n", g) // func([]int)
  ```
* Вариативные функции часто используются для форматирования строк;
* Тип `interface{}` может быть использован для создания вариативных функций, которые принимают любые значения в качестве
  последних аргументов. Это обеспечивает максимальную гибкость и универсальность функций.