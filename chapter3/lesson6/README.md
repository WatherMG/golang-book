# 3.6 Константы

Константы представляют собой выражения, значения которых известны компилятору и вычисление гарантированно
происходит `**_во время компиляции_**`, а **_не_** во время выполнения (`runtime`).

Базовым типом каждой константы является фундаментальный тип: логическое значение, строка или число.

Объявление `const` определяет именованные значения, которые синтаксически выглядят как переменные, их значения
являются константами, что предотвращает их случайное (или ошибочное) изменение во время выполнения программы (runtime).

Например, для предоставления такой математической константы, как число `Пи`, константа предпочтительнее переменной, т.к.
значение этого числа не изменяется:

``` go
const pi = 3.14159 // Лучшим приблежением является `math.Pi`
```

В одном объявлении может находиться последовательность констант. Такое объявление подходит для групп связанных значений:

``` go
consts (
    e  = 2.71828182845904523536028747135266249775724709369995957496696763
    pi = 3.14159265358979323846264338327950288419716939937510582097494459
)
```

Многие вычисления констант могут быть завершены во время компиляции, уменьшая тем самым количество работы, необходимой
во время выполнения (`runtime`), и позволяя выполнять другие оптимизации компилятора. При этом, ошибки, обычно
обнаруживаемые во время выполнения, могут быть найдены во время компиляции, если операнды представляют собой константы.
Например, целочисленное деление на нуль, индексация за пределами строки или любые операции с плавающей точкой, которые
приводят к значению, не являющемуся корректным конечным значением с плавающей точкой.

Результаты всех арифметических и логических операций, а также операций сравнения с операндами-константами также являются
константами, как и результаты преобразований и вызовов некоторых встроенных функций, таких как `len, cap, real, imag,
complex. unsafe.Sizeof`.

Поскольку компилятору известны их значения, константные выражения могут находиться в типах, в частности - в качестве
длины массива:

``` go
const IPv4Len = 4 

//parseIPv4 анализирует адрес IPv4 (d.d.d.d)
func parseIPv4(s string) IP {
    var p [IOv4Len]byte
    // ...
} 
```

Объявление константы может указывать как тип, так и значение, но при отсутствии явно указанного типа он выводится из
выражения в правой части.

В коде ниже `time.Duration` представляет собой именованный тип, базовым для которого является тип `int64`,
а `time.Minute`- константа этого типа. Обе объявленные константы имеют тип `time.Duration`, что показывают символы
преобразования `%T`:

``` go
const noDelay time.Duration = 0
const timeout = 5 * time.Minute
fmt.Printf("%T %[1]v\n", noDelay) // "time.Duration 0"
fmt.Printf("%T %[1]v\n", timeout) // "time.Duration 5m0s"
fmt.Printf("%T %[1]v\n", time.Minute) // "time.Duration 1m0s"
```

Если последовательность констант объявлена в виде группы, выражение с правой стороны от символа `=` может быть опущено
для всех констант, кроме первой. При этом подразумевается, что в текущей константе без явно указанного выражения будут
использованы значение и тип предыдущего выражения:

``` go
consts (
    a = 1
    b
    c = 2
    d
)

fmt.Println(a, b, c, d) // "1 1 2 2"
```

Если все значения констант оказываются одинаковыми, от этого не слишком много толку. Гораздо интереснее и полезнее
использовать генератор констант `iota`.

### Выводы:

* Константы в Go - это выражения с известными значениями `на этапе компиляции`, что позволяет компилятору выполнять
  оптимизации и уменьшать нагрузку на выполнение программы;
* Объявление констант начинается с ключевого слова `const`, их значения могут быть строками, числами и логическими
  значениями;
* Инициализация константы может быть `опущена`, в таком случае будут использованы значения и тип предыдущей константы;
* Константы обеспечивают защиту от случайного или ошибочного `изменения значения во время выполнения программы`, что
  повышает надежность кода;
* Константные выражения могут использоваться в качестве значений длины массива и других типах данных, что облегчает
  работу с этими типами данных;
* Использование констант позволяет компилятору обнаруживать ошибки, обычно идентифицируемые во время выполнения
  программы, уже на стадии компиляции;
* `iota` - это `генератор последовательных констант` в Go. При объявлении группы констант с использованием `iota`, его
  значение начинается с `0` и увеличивается на `1` для каждой последующей константы. Это позволяет удобно создавать группы
  констант с последовательными значениями, при этом значением каждой константы можно управлять независимо. Также можно
  использовать `iota` для создания констант с увеличивающимися значениями в определенную арифметическую прогрессию:
  * ``` go
    var Flags uint
    const (
	     FlagUp Flags = 1 << iota // 1
	     FlagBroadcast            // 2
	     FlagLoopback             // 4
	     FlagPointToPoint         // 8
	     FlagMulticast            // 16
    )
    ```